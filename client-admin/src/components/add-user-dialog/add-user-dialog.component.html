<div class="add-user-dialog" dir="rtl">
  <h2 mat-dialog-title>
    <mat-icon color="primary">person_add</mat-icon>
    <span>הוספת משתמש חדש</span>
  </h2>

  <mat-dialog-content>
    <form [formGroup]="addUserForm" (ngSubmit)="onSubmit()" class="add-user-form">
      <div formGroupName="userGroup">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>שם פרטי</mat-label>
          <input matInput formControlName="firstName" type="text" required>
          <mat-icon matSuffix>person</mat-icon>
          @if (addUserForm.get('userGroup.firstName')?.invalid && addUserForm.get('userGroup.firstName')?.touched) {
            <mat-error>יש להזין שם פרטי</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>שם משפחה</mat-label>
          <input matInput formControlName="lastName" type="text" required>
          <mat-icon matSuffix>person</mat-icon>
          @if (addUserForm.get('userGroup.lastName')?.invalid && addUserForm.get('userGroup.lastName')?.touched) {
            <mat-error>יש להזין שם משפחה</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>אימייל</mat-label>
          <input matInput formControlName="email" type="email" required>
          <mat-icon matSuffix>email</mat-icon>
          @if (addUserForm.get('userGroup.email')?.invalid && addUserForm.get('userGroup.email')?.touched) {
            <mat-error>יש להזין אימייל תקין</mat-error>
          }
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>סיסמה</mat-label>
        <input matInput formControlName="password" type="password" required>
        <mat-icon matSuffix>lock</mat-icon>
        @if (addUserForm.get('password')?.invalid && addUserForm.get('password')?.touched) {
          <mat-error>יש להזין סיסמה</mat-error>
        }
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">
      <mat-icon>cancel</mat-icon> ביטול
    </button>
    <button 
      mat-raised-button 
      color="primary" 
      [disabled]="addUserForm.invalid || loading" 
      (click)="onSubmit()">
      <mat-icon>save</mat-icon> 
      <span *ngIf="!loading">שמירה</span>
      <span *ngIf="loading">שומר...</span>
    </button>
  </mat-dialog-actions>
</div>
